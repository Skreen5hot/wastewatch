 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#00ff66"/>

    <!-- PWA & iOS Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WasteWatch">

    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-167x167.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/icon-120x120.png">


    <title>WasteWatch</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
</head>
<body>

    <div class="pipboy-watch">
        <header>
            <h1>[WasteWatch]</h1>
            <nav>
                <button class="nav-btn active" data-tab="home">Home</button>
                <button class="nav-btn" data-tab="archive">Archive</button>
                <button class="nav-btn" data-tab="trends">Trends</button>
            </nav>
        </header>

        <main>
            <!-- Home/Stopwatch Section -->
            <section id="home" class="tab-content active">
                <div id="display">
                    <div id="time-display">00:00:00.00</div>
                    <div id="cost-display">$0.00</div>
                </div>
                <div class="info-bar">
                    <span id="meeting-name-display">No Meeting Configured</span>
                </div>
                <div class="controls">
                    <button class="btn" id="startPauseBtn" disabled>Start</button>
                    <button class="btn" id="endBtn" disabled>End</button>
                    <button class="btn" id="miniplayerBtn" disabled>Miniplayer</button>
                    <button class="btn" id="configureBtn">Configure</button>
                </div>
            </section>

            <!-- Archive Section -->
            <section id="archive" class="tab-content">
                <h2>[Meeting Archive]</h2>
                <div id="archive-list">
                    <!-- Meetings will be populated here by JS -->
                </div>
                <div class="controls">
                    <button class="btn" id="clearArchiveBtn">Clear Archive</button>
                </div>
            </section>

            <!-- Trends Section (Future) -->
            <section id="trends" class="tab-content">
                <h2>[Cost Trends]</h2>
                <div class="chart-container">
                    <canvas id="trendsChart"></canvas>
                </div>
            </section>
        </main>

        <footer>
            Vault-Tec Approved. Version 1.0.0
        </footer>
    </div>

    <!-- Configuration Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <h2>[Configure Meeting]</h2>
            <form id="configForm">
                <div class="form-group">
                    <label for="meetingName">Meeting Name</label>
                    <input type="text" id="meetingName" required>
                </div>

                <div class="form-group">
                    <label>Cost Input Mode</label>
                    <div id="costInputMode">
                        <input type="radio" id="modeSimple" name="inputMode" value="simple">
                        <label for="modeSimple">Simple (Total)</label>
                
                        <input type="radio" id="modeDetailed" name="inputMode" value="detailed">
                        <label for="modeDetailed">Detailed (Roles)</label>
                        
                        <input type="radio" id="modeAttendeeList" name="inputMode" value="list" checked>
                        <label for="modeAttendeeList">Attendee List</label>
                    </div>
                </div>

                <!-- Simple Mode -->
                <div id="simpleModeInputs" class="input-mode-container" style="display: none;">
                    <div class="form-group">
                        <label for="avgHourlyRateSimple">Avg. Hourly Rate ($)</label>
                        <input type="number" id="avgHourlyRateSimple" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label for="totalAttendees">Total Number of Attendees</label>
                        <input type="number" id="totalAttendees" min="1" value="1">
                    </div>
                </div>

                <!-- Detailed Mode -->
                <div id="detailedModeInputs" class="input-mode-container" style="display: none;">
                    <p>Define Roles, Rates, and Counts:</p>
                    <div id="roleInputsContainer">
                        <!-- Role groups will be dynamically added here -->
                    </div>
                    <button type="button" id="addRoleBtn" class="btn-small">âž• Add Role</button>
                </div>

                <!-- Attendee List Mode -->
                <div id="attendeeListModeInputs" class="input-mode-container"> 
                    <div class="form-group">
                        <label for="avgHourlyRateList">Avg. Hourly Rate ($)</label>
                        <input type="number" id="avgHourlyRateList" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="attendees">Attendees (comma or newline separated)</label>
                        <textarea id="attendees" rows="5" required></textarea>
                    </div>
                </div>

                <div class="modal-controls">
                    <button type="submit" class="btn" id="saveAndStartBtn">Save & Start</button>
                    <button type="button" class="btn" id="cancelBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Archive Detail Modal -->
    <div id="archiveDetailModal" class="modal">
        <div class="modal-content">
            <h2>[Archived Meeting Details]</h2>
            <div id="archiveDetailContent">
                <!-- Details will be populated here by JS -->
            </div>
            <div class="modal-controls">
                <button type="button" class="btn" id="closeDetailBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- Miniplayer Content (hidden by default, used for Picture-in-Picture) -->
    <div id="miniplayer-content" style="display: none;">
        <div id="mini-display">
            <div id="mini-time-display">00:00:00.00</div>
            <div id="mini-cost-display">$0.00</div>
        </div>
        <div class="mini-info-bar">
            <span id="mini-meeting-name-display">No Meeting Configured</span>
        </div>
    </div>


    <script src="libs/chart.min.js"></script>
    <script src="app.js"></script>
</body>
</html>